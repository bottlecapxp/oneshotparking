{"ast":null,"code":"import _slicedToArray from\"/Users/bottlecapmedia/Documents/Applications/OneShot Parking/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useContext,useState,useEffect,useCallback}from\"react\";import{PaymentContext}from'../../Context/PaymentContext';import\"../Timer/Timer.css\";import Tick from'./../../Assets/tick.mp3';import{Howl,Howler}from'howler';import Moon from'../../Assets/moon.png';import Day from\"../../Assets/sun.svg\";import{CircularInput,CircularTrack,CircularProgress,CircularThumb}from\"react-circular-input\";import TimerLogic from\"./TimerLogic\";import{useMemo}from\"react\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Timer=function Timer(props){// const today = new Date();\nvar timerLogic=new TimerLogic();var _useContext=useContext(PaymentContext),totalbilling=_useContext.totalbilling,dayTime=_useContext.dayTime,dayTimeBilling=_useContext.dayTimeBilling,nightTime=_useContext.nightTime,nightTimeBilling=_useContext.nightTimeBilling,setExpiredTime=_useContext.setExpiredTime,setStartTime=_useContext.setStartTime,darkMode=_useContext.darkMode;// const pGenerator = new PaymentGenerator();\nvar _useState=useState(null),_useState2=_slicedToArray(_useState,2),value=_useState2[0],setValue=_useState2[1];var _useState3=useState(),_useState4=_slicedToArray(_useState3,2),validateDayTime=_useState4[0],setDayTimeValidation=_useState4[1];var _useState5=useState(),_useState6=_slicedToArray(_useState5,2),validateNightTime=_useState6[0],setNightTimeValidation=_useState6[1];var _useState7=useState({circleContainer:'timeInfo',costAmount:'cost_amount',circularTrack:'#eee'}),_useState8=_slicedToArray(_useState7,2),darkModeStyle=_useState8[0],setDarkModeStyle=_useState8[1];var hours=Math.floor(timerLogic.scrollTime(timerLogic.stepValue(value))/10);var minutes=0;var date=new Date();var get_current_mins=date.getMinutes();var rem_minutes=60-get_current_mins;//  We're going to check for Max trigger\nvar max=props.checked;if(max=='true'){if(rem_minutes>0){hours=hours-1;minutes=60-get_current_mins;if(hours<0){hours=0;}}}var time_unit_=['am','pm'];var timeUnit;var start_time_unit;var currentTime=new Date();var expiredMinutes=parseInt(currentTime.getMinutes()+minutes);var expiredHours=currentTime.getHours()+hours;var timer_expired_hours=currentTime.getHours()+hours;var twelve_hour_time=function twelve_hour_time(){if(expiredHours>12){expiredHours=expiredHours-12;twelve_hour_time();}};twelve_hour_time();var set_meridiem=function set_meridiem(){var time_expression=currentTime.getHours()+hours;var start_meridiem=currentTime.getHours();switch(start_meridiem){case start_meridiem>12?start_meridiem:null:start_time_unit=time_unit_[1];break;case start_meridiem<12?start_meridiem:null:start_time_unit=time_unit_[0];break;}switch(time_expression){case time_expression>=12&&time_expression<=24?time_expression:null:timeUnit=time_unit_[1];break;case time_expression>24||time_expression<12?time_expression:null:timeUnit=time_unit_[0];break;}if(expiredMinutes<10){expiredMinutes=\"\".concat(0,expiredMinutes);}if(expiredMinutes==60){expiredHours=expiredHours+1;expiredMinutes='00';}};set_meridiem();// FULL TIME CALCULATIONS.\nvar expTime,expTimeInSecs;var limits=[18,24,6];if(hours==5){var _date=new Date();var currentHours=_date.getHours();var currentMins=_date.getMinutes();var _currentTime=currentHours*3600+currentMins*60;var countdown_mins=0;var cMins=60-currentMins;var countdown_hours=limits[0]-currentHours;if(currentHours>limits[2]&&currentHours<limits[0]){// let Calculate the countdown hours & mins \nif(currentMins!=0||currentMins!='00'){countdown_hours=countdown_hours-1;countdown_mins=cMins;// currentTime in Seconds\nvar countdown_time=countdown_hours*3600+countdown_mins*60;var fulltime=_currentTime+countdown_time;var fulltime_calc=fulltime/3600;expiredHours=fulltime_calc>12?fulltime_calc-12:fulltime_calc;expiredMinutes='00';}if(currentMins==0||currentMins=='00'){var countdown_time=countdown_hours*3600+countdown_mins*60;var fulltime=_currentTime+countdown_time;var fulltime_calc=fulltime/3600;expiredHours=fulltime_calc>12?fulltime_calc-12:fulltime_calc;}console.log(countdown_hours,countdown_mins);// Then let's introduce the remaining time. \n}}expTime=\"\".concat(expiredHours,\":\").concat(expiredMinutes).concat(timeUnit);expTimeInSecs=timer_expired_hours*3600+expiredMinutes*60;var startTime=\"\".concat(currentTime.getHours(),\":\").concat(currentTime.getMinutes()<10?\"0\".concat(currentTime.getMinutes()):currentTime.getMinutes()).concat(start_time_unit);localStorage.setItem('expTimeInSecs',expTimeInSecs);localStorage.setItem('expTime',expTime);localStorage.setItem('total',totalbilling);// Keeps track of time changes\n// const sound = new Howl({\n// \tsrc: [Tick], \n// \tvolume: 0.7\n// })\n// const sounds = () => { \n// \tif(hours > 0 && hours < 100){\n// \t\tsound.play()\n// }\n// }\n// sounds()\nuseEffect(function(){if(darkMode>=1800||darkMode<=600){setDarkModeStyle({circleContainer:'timeInfo_dark',costAmount:'cost_amount_dark',circularTrack:'#1B242F'});}if(dayTime==0){setDayTimeValidation(true);}else{setDayTimeValidation(false);}if(nightTime==0){setNightTimeValidation(true);}localStorage.setItem('startTime',startTime);if(value==0&&props.addTime=='-0.20'){return;}else{setValue(value+props.addTime);}},[props.addTime]);setStartTime(startTime);setExpiredTime(expTime);return/*#__PURE__*/_jsxs(\"div\",{className:\"timer_container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"timer_holder\",children:[/*#__PURE__*/_jsx(\"div\",{id:darkModeStyle.circleContainer,children:/*#__PURE__*/_jsxs(\"div\",{id:\"time_holder\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"set_time\",style:{marginTop:'10px'},children:\"Set Duration\"}),/*#__PURE__*/_jsx(\"p\",{id:\"time\",children:hours==5?'Max Parking':\"\".concat(hours,\"h:\").concat(minutes,\"m\")}),/*#__PURE__*/_jsx(\"p\",{className:\"set_time\",style:{marginTop:'10px'},children:\"Expires at\"}),/*#__PURE__*/_jsx(\"p\",{className:\"rate_\",style:{textAlign:'center'},children:expTime})]})}),/*#__PURE__*/_jsxs(CircularInput,{radius:115,value:timerLogic.stepValue(value),onChange:function onChange(v){setValue(timerLogic.stepValue(v));},children:[/*#__PURE__*/_jsx(CircularTrack,{strokeWidth:10,stroke:darkModeStyle.circularTrack}),/*#__PURE__*/_jsx(CircularProgress,{className:\"bar\",stroke:\"#ff4f4f\",strokeWidth:12}),/*#__PURE__*/_jsx(CircularThumb,{r:15,fill:\"#F0F0F3\",stroke:\"#ff4f4f\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"cost_holder\",children:[/*#__PURE__*/_jsx(\"div\",{id:darkModeStyle.costAmount,children:\"Total Cost: \"}),/*#__PURE__*/_jsxs(\"div\",{className:\"price\",children:[\"$\",\"\".concat(totalbilling)]})]})]});};export default Timer;// (cMins < 10? `0${cMins}`: cMins)\n// timerLogic.scrollTime(timerLogic.stepValue(value))%100\n{/* <p className='set_time'>Daily Rates</p> */}{/* Rates Settings */}{/* <div className='rate_container'>\n\t\t\t\t\t\t\t<div className='daily_container day'>\n\t\t\t\t\t\t\t\t<img id='sun' src={Day} alt='sun'></img>\n\t\t\t\t\t\t\t\t<p className='rate_'>$4hr</p>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div className='daily_container night'>\n\t\t\t\t\t\t\t\t<img id='moon' src={Moon} alt='moon'></img>\n\t\t\t\t\t\t\t\t<p className='rate_'>$6hr</p>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div> */}// if(expiredHours == 24){\n// \thours = 12\n// \ttimeUnit = time_unit_[0]\n// }\n// if(expiredHours > 24){\n// \thours = hours - 24\n// \ttimeUnit = time_unit_[0]\n// }\n// if(expiredHours >= 12){\n// \ttimeUnit = time_unit_[1]\n// }\n// if(currentTime.getHours() >= 12){\n// \tcTimeUnit = time_unit_[1]\n// }else{\n// \tcTimeUnit = time_unit_[0]\n// }\n// if(expiredMinutes > 60){\n// \texpiredMinutes = expiredMinutes - 60\n// \texpiredHours = expiredHours + 1\n// }\n// if(expiredHours > 12){\n// \texpiredHours = expiredHours - 12 \n// \tif(expiredHours > 12 ){ \n// \t\texpiredHours = expiredHours - 12\n// \t}\n// }\n// if(minutes == 0){\n// \tminutes = '00'\n// }\n// DEPRECATED CODE - LIVES FOR 30 DAYS THEN DELETED\n// <div className='overlap_Cost'>\n// {/* Day rate */}\n// <div className='day_rate'>\n// \t<div className='info_holder dayRate_icon'>\n// \t<img id='sun' src={Day} alt='sun'></img>\n// \t</div>\n// \t<div id='hours_' className='info_holder dayRate_time'>{Math.floor(dayTime/100)}hrs : {Math.floor(dayTime%100)}mins</div>\n// \t<div id='cost_' className='info_holder dayRate_cost'>${dayTimeBilling}</div>\n// </div>\n// {/* Night Rate */}\n// <div className='night_rate'>\n// \t<div className='info_holder nightRate_icon'>\n// \t<img id='moon' src={Moon} alt='moon'></img>\n// \t</div>\n// \t<div id='hours_' className='info_holder dayRate_time'>{Math.floor(nightTime/100)}hrs : {Math.floor(nightTime%100)}mins</div>\n// \t<div id='cost_' className='info_holder dayRate_cost'>${nightTimeBilling}</div>\n// </div>\n// </div>","map":{"version":3,"sources":["/Users/bottlecapmedia/Documents/Applications/OneShot Parking/src/Components/Timer/Timer.js"],"names":["React","useContext","useState","useEffect","useCallback","PaymentContext","Tick","Howl","Howler","Moon","CircularInput","CircularTrack","CircularProgress","CircularThumb","TimerLogic","useMemo","Timer","props","timerLogic","totalbilling","dayTime","dayTimeBilling","nightTime","nightTimeBilling","setExpiredTime","setStartTime","darkMode","value","setValue","validateDayTime","setDayTimeValidation","validateNightTime","setNightTimeValidation","circleContainer","costAmount","circularTrack","darkModeStyle","setDarkModeStyle","hours","Math","floor","scrollTime","stepValue","minutes","date","Date","get_current_mins","getMinutes","rem_minutes","max","checked","time_unit_","timeUnit","start_time_unit","currentTime","expiredMinutes","parseInt","expiredHours","getHours","timer_expired_hours","twelve_hour_time","set_meridiem","time_expression","start_meridiem","expTime","expTimeInSecs","limits","currentHours","currentMins","countdown_mins","cMins","countdown_hours","countdown_time","fulltime","fulltime_calc","console","log","startTime","localStorage","setItem","addTime","marginTop","textAlign","v"],"mappings":"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","sourcesContent":["import React, { useContext, useState, useEffect, useCallback } from \"react\";\nimport { PaymentContext } from '../../Context/PaymentContext'\nimport \"../Timer/Timer.css\";\nimport Tick from './../../Assets/tick.mp3'\nimport { Howl, Howler } from 'howler'\nimport Moon from '../../Assets/moon.png'\nimport Day from '../../Assets/sun.svg'\n\nimport {\n\tCircularInput,\n\tCircularTrack,\n\tCircularProgress,\n\tCircularThumb,\n} from \"react-circular-input\";\nimport TimerLogic from \"./TimerLogic\";\nimport { useMemo } from \"react\";\n\n\n\nconst Timer = (props) => {\n\t// const today = new Date();\n\tconst timerLogic = new TimerLogic();\n\tconst { totalbilling, dayTime, dayTimeBilling, nightTime, nightTimeBilling, setExpiredTime, setStartTime, darkMode } = useContext(PaymentContext)\n\t// const pGenerator = new PaymentGenerator();\n\tconst [value, setValue] = useState(null);\n\tconst [validateDayTime, setDayTimeValidation] = useState()\n\tconst [validateNightTime, setNightTimeValidation] = useState()\n\tconst [darkModeStyle, setDarkModeStyle] = useState({\n\t\tcircleContainer: 'timeInfo', \n\t\tcostAmount: 'cost_amount',\n\t\tcircularTrack: '#eee'\n\t\t \n\t })\n\n\tvar hours = Math.floor(timerLogic.scrollTime(timerLogic.stepValue(value))/10)\n\tvar minutes = 0\n\tconst date = new Date()\n\tconst get_current_mins = date.getMinutes()\n\tconst rem_minutes = 60 - get_current_mins\n\n\t//  We're going to check for Max trigger\n\tconst max = props.checked\n\tif(max == 'true'){\n\tif(rem_minutes > 0){ \n\t\thours = hours - 1\n\t\tminutes = 60 - get_current_mins\n\t\tif(hours < 0){ \n\t\t\t\thours = 0\n\t\t\t}\n\t\t}\n\t}\n\n\n\t\n\tconst time_unit_ = ['am', 'pm']\n\tvar timeUnit;\n\tvar start_time_unit; \n\tconst currentTime = new Date();\n\tvar expiredMinutes = parseInt(currentTime.getMinutes() + minutes)\n\tvar expiredHours = currentTime.getHours() + hours\n\tvar timer_expired_hours = currentTime.getHours() + hours\n\n\n\tconst twelve_hour_time = () => { \n\t\tif(expiredHours > 12){ \n\t\t\texpiredHours = expiredHours - 12 \n\t\t\ttwelve_hour_time()\n\t\t}\n\t}\n\ttwelve_hour_time()\n\n\tconst set_meridiem = () => { \n\t\tvar time_expression = currentTime.getHours() + hours\n\t\tconst start_meridiem = currentTime.getHours()\n\n\t\tswitch(start_meridiem){ \n\t\t\tcase(start_meridiem > 12? start_meridiem: null):\n\t\t\tstart_time_unit = time_unit_[1]\n\t\t\tbreak;\n\t\t\tcase (start_meridiem < 12 ? start_meridiem: null): \n\t\t\tstart_time_unit = time_unit_[0]\n\t\t\tbreak;\n\t\t}\n\n\n\n\t\tswitch(time_expression){\n\t\t\tcase (time_expression >= 12 && time_expression <= 24 ? time_expression : null):\n\t\t\t\ttimeUnit = time_unit_[1]\n\t\t\t\tbreak; \n\t\t\tcase (time_expression > 24 || time_expression < 12 ? time_expression : null): \n\t\t\t\ttimeUnit = time_unit_[0]\n\t\t\t\tbreak;\n\t\t}\n\n\t\tif(expiredMinutes < 10){\n\t\t\texpiredMinutes = `${0}${expiredMinutes}`\n\t\t}\n\t\tif(expiredMinutes == 60){ \n\t\t\texpiredHours = expiredHours + 1\n\t\t\texpiredMinutes = '00'\n\t\t}\n\n\t}\n\tset_meridiem()\n\n\t// FULL TIME CALCULATIONS.\n\tvar expTime, expTimeInSecs\n\n\tconst limits = [18, 24, 6]\n\tif(hours == 5){\n\t\tconst date = new Date()\n\t\t const currentHours = date.getHours()\n\t\t const currentMins = date.getMinutes()\n\t\t const currentTime = (currentHours * 3600) + (currentMins * 60)\n\n\t\t var countdown_mins = 0\n\t\t const cMins = 60 - currentMins\n\t\t var countdown_hours = limits[0] - currentHours\n\t\tif(currentHours > limits[2] && currentHours < limits[0]){ \n\t\t\t// let Calculate the countdown hours & mins \n\t\t\tif(currentMins != 0 || currentMins != '00'){ \n\t\t\t\tcountdown_hours = countdown_hours - 1\n\t\t\t\tcountdown_mins = cMins\n\t\t\t\t// currentTime in Seconds\n\t\t\t\tvar countdown_time = (countdown_hours * 3600) + (countdown_mins * 60)\n\t\t\t\tvar fulltime = currentTime + countdown_time\n\t\t\t\tvar fulltime_calc = fulltime / 3600\n\t\t\t\texpiredHours = (fulltime_calc > 12? fulltime_calc - 12: fulltime_calc )\n\t\t\t\texpiredMinutes = '00'\n\n\t\t\t} \n\t\t\tif(currentMins == 0 || currentMins == '00'){ \n\t\t\t\tvar countdown_time = (countdown_hours * 3600) + (countdown_mins * 60)\n\t\t\t\tvar fulltime = currentTime + countdown_time\n\t\t\t\tvar fulltime_calc = fulltime / 3600\n\t\t\t\texpiredHours = (fulltime_calc > 12? fulltime_calc - 12: fulltime_calc )\n\t\t\t}\n\t\t\tconsole.log(countdown_hours, countdown_mins)\n\t\t\t// Then let's introduce the remaining time. \n\n\n\t\t}\n\t\n\n\t}\n\n\texpTime = `${expiredHours}:${expiredMinutes}${timeUnit}`\n\texpTimeInSecs = (timer_expired_hours * 3600) + (expiredMinutes * 60)\n\n\n\tvar startTime = `${currentTime.getHours()}:${currentTime.getMinutes() < 10? `0${currentTime.getMinutes()}`: currentTime.getMinutes() }${start_time_unit}`\n\n\n\tlocalStorage.setItem('expTimeInSecs', expTimeInSecs)\n\tlocalStorage.setItem('expTime', expTime)\n\tlocalStorage.setItem('total', totalbilling)\n\n\t\n\t// Keeps track of time changes\n\t// const sound = new Howl({\n\t// \tsrc: [Tick], \n\t// \tvolume: 0.7\n\t// })\n\t// const sounds = () => { \n\t// \tif(hours > 0 && hours < 100){\n\t// \t\tsound.play()\n\t// }\n\t\t\t\n\t\n\t\n\t\t// }\n\t\t// sounds()\n\n\tuseEffect(() => {\n\t\tif(darkMode >= 1800 || darkMode <= 600){\n\t\t\t\tsetDarkModeStyle({\n\t\t\t\t\tcircleContainer: 'timeInfo_dark', \n\t\t\t\t\tcostAmount: 'cost_amount_dark', \n\t\t\t\t\tcircularTrack: '#1B242F'\n\t\t\t\t})\n\t\t\t}\n\n\t\tif (dayTime == 0) {\n\t\t\tsetDayTimeValidation(true)\n\t\t} else { setDayTimeValidation(false) }\n\t\tif (nightTime == 0) {\n\t\t\tsetNightTimeValidation(true)\n\t\t}\n\t\tlocalStorage.setItem('startTime', startTime)\n\n\n\t\tif(value == 0 && props.addTime == '-0.20'){ \n\t\t\t\treturn;\n\t\t}\n\t\telse{\n\t\t\t\tsetValue(value + props.addTime);\n\t\t}\n\n\n\t\t\n\n\n\t}, [props.addTime]);\n\tsetStartTime(startTime)\n\tsetExpiredTime(expTime)\n\n\n\n\n\n\treturn (\n\t\t<div className='timer_container'>\n\t\t\t<div className='timer_holder'>\n\t\t\t\t<div id={darkModeStyle.circleContainer}>\n\t\t\t\t\t<div id='time_holder'>\n\t\t\t\t\t<p className='set_time' style={{marginTop: '10px'}}>Set Duration</p>\n\t\t\t\t\t\t<p id='time'>{(hours == 5?'Max Parking':`${hours}h:${minutes}m`)}</p>\n\n\t\t\t\t\t<p className='set_time' style={{marginTop: '10px'}}>Expires at</p>\n\t\t\t\t\t<p className='rate_' style={{textAlign: 'center'}}>{expTime}</p>\t\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\n\t\t\t\t<CircularInput radius={115}\n\t\t\t\t\tvalue={timerLogic.stepValue(value)}\n\t\t\t\t\tonChange={(v) => {setValue(timerLogic.stepValue(v))}}>\n\t\t\t\t\t<CircularTrack strokeWidth={10} stroke={darkModeStyle.circularTrack} />\n\t\t\t\t\t<CircularProgress className='bar' stroke='#ff4f4f' strokeWidth={12} />\n\t\t\t\t\t<CircularThumb r={15} fill='#F0F0F3' stroke='#ff4f4f' />\n\t\t\t\t</CircularInput>\n\t\t\t</div>\n\n\n\t\t\t<div className='cost_holder'><div id={darkModeStyle.costAmount}>Total Cost: </div><div className='price'>${`${totalbilling}`}</div></div>\n\n\t\t</div>\n\t);\n};\nexport default Timer;\n\n\n// (cMins < 10? `0${cMins}`: cMins)\n// timerLogic.scrollTime(timerLogic.stepValue(value))%100\n\t\n\t\t\t\t\t\t{/* <p className='set_time'>Daily Rates</p> */}\n\t\t\t\t\t\t{/* Rates Settings */}\n\t\t\t\t\t\t{/* <div className='rate_container'>\n\t\t\t\t\t\t\t<div className='daily_container day'>\n\t\t\t\t\t\t\t\t<img id='sun' src={Day} alt='sun'></img>\n\t\t\t\t\t\t\t\t<p className='rate_'>$4hr</p>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div className='daily_container night'>\n\t\t\t\t\t\t\t\t<img id='moon' src={Moon} alt='moon'></img>\n\t\t\t\t\t\t\t\t<p className='rate_'>$6hr</p>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div> */}\n\t// if(expiredHours == 24){\n\t// \thours = 12\n\t// \ttimeUnit = time_unit_[0]\n\t// }\n\t// if(expiredHours > 24){\n\t// \thours = hours - 24\n\t// \ttimeUnit = time_unit_[0]\n\t// }\n\t// if(expiredHours >= 12){\n\t// \ttimeUnit = time_unit_[1]\n\t// }\n\n\t// if(currentTime.getHours() >= 12){\n\t// \tcTimeUnit = time_unit_[1]\n\t// }else{\n\t// \tcTimeUnit = time_unit_[0]\n\t// }\n\n\n\t// if(expiredMinutes > 60){\n\t// \texpiredMinutes = expiredMinutes - 60\n\t// \texpiredHours = expiredHours + 1\n\t// }\n\n\t// if(expiredHours > 12){\n\t// \texpiredHours = expiredHours - 12 \n\t// \tif(expiredHours > 12 ){ \n\t// \t\texpiredHours = expiredHours - 12\n\t// \t}\n\n\t// }\n\n\n\t// if(minutes == 0){\n\t// \tminutes = '00'\n\t// }\n\n// DEPRECATED CODE - LIVES FOR 30 DAYS THEN DELETED\n\n// <div className='overlap_Cost'>\n// {/* Day rate */}\n// <div className='day_rate'>\n// \t<div className='info_holder dayRate_icon'>\n// \t<img id='sun' src={Day} alt='sun'></img>\n// \t</div>\n\n// \t<div id='hours_' className='info_holder dayRate_time'>{Math.floor(dayTime/100)}hrs : {Math.floor(dayTime%100)}mins</div>\n// \t<div id='cost_' className='info_holder dayRate_cost'>${dayTimeBilling}</div>\n\n// </div>\n// {/* Night Rate */}\n// <div className='night_rate'>\n// \t<div className='info_holder nightRate_icon'>\n// \t<img id='moon' src={Moon} alt='moon'></img>\n// \t</div>\n// \t<div id='hours_' className='info_holder dayRate_time'>{Math.floor(nightTime/100)}hrs : {Math.floor(nightTime%100)}mins</div>\n// \t<div id='cost_' className='info_holder dayRate_cost'>${nightTimeBilling}</div>\n\n// </div>\n\n// </div>"]},"metadata":{},"sourceType":"module"}