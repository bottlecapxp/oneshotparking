{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.getElementPosition = exports.stopEvent = exports.absPos = exports.valueToAngle = exports.calcAngleDiff = exports.calculateNearestValueToPoint = exports.clamp = exports.matrixScale = exports.degrees = exports.radians = exports.polarToCartesian = exports.ANGLE_OFFSET = exports.DEG_360_IN_RAD = void 0;\nexports.DEG_360_IN_RAD = radians(360);\nexports.ANGLE_OFFSET = Math.PI;\n\nfunction polarToCartesian(_a) {\n  var center = _a.center,\n      angle = _a.angle,\n      radius = _a.radius;\n  return {\n    x: center.x + Math.sin(angle) * radius,\n    y: center.y + Math.cos(angle) * radius\n  };\n}\n\nexports.polarToCartesian = polarToCartesian;\n\nfunction radians(deg) {\n  return deg * Math.PI / 180;\n}\n\nexports.radians = radians;\n\nfunction degrees(rad) {\n  return rad * 180 / Math.PI;\n}\n\nexports.degrees = degrees;\n\nfunction matrixScale(scale, x, y) {\n  return \"matrix(\" + scale + \", 0, 0, \" + scale + \", \" + (x - scale * x) + \", \" + (y - scale * y) + \")\";\n}\n\nexports.matrixScale = matrixScale;\n\nfunction clamp(min, max, value) {\n  return Math.min(Math.max(value, min), max);\n}\n\nexports.clamp = clamp;\n\nfunction calculateNearestValueToPoint(_a) {\n  var _b = _a.center,\n      centerX = _b.x,\n      centerY = _b.y,\n      _c = _a.container,\n      containerX = _c.x,\n      containerY = _c.y,\n      _d = _a.point,\n      pointX = _d.x,\n      pointY = _d.y,\n      radius = _a.radius,\n      value = _a.value;\n  var radialPosition = {\n    x: pointX - containerX - centerX,\n    y: -(pointY - containerY - centerY)\n  };\n  var valuePosition = polarToCartesian({\n    center: {\n      x: 0,\n      y: 0\n    },\n    angle: valueToAngle(value),\n    radius: radius\n  });\n  var deltaTheta = calcAngleDiff(radialPosition.x, radialPosition.y, valuePosition.x, -valuePosition.y);\n  var deltaValue = value + deltaTheta / 360;\n  var nearestValue = deltaValue > 1 ? deltaValue - 1 : deltaValue;\n  return nearestValue;\n}\n\nexports.calculateNearestValueToPoint = calculateNearestValueToPoint;\n\nfunction calcAngleDiff(x1, y1, x2, y2) {\n  var arcTangent = Math.atan2(x1 * y2 - y1 * x2, x1 * x2 + y1 * y2);\n\n  if (arcTangent < 0) {\n    arcTangent += 2 * Math.PI;\n  }\n\n  return arcTangent * 180 / Math.PI;\n}\n\nexports.calcAngleDiff = calcAngleDiff;\n\nfunction valueToAngle(value) {\n  return -value * exports.DEG_360_IN_RAD + exports.ANGLE_OFFSET;\n}\n\nexports.valueToAngle = valueToAngle;\n\nfunction absPos(e) {\n  var touchEvent = e.touches && e;\n\n  if (touchEvent) {\n    return {\n      x: touchEvent.changedTouches[0].pageX - (window.scrollX || window.pageXOffset),\n      y: touchEvent.changedTouches[0].pageY - (window.scrollY || window.pageYOffset)\n    };\n  }\n\n  var mouseEvent = e.pageX && e;\n\n  if (mouseEvent) {\n    return {\n      x: mouseEvent.pageX - (window.scrollX || window.pageXOffset),\n      y: mouseEvent.pageY - (window.scrollY || window.pageYOffset)\n    };\n  }\n\n  throw new Error('Unknown event type received (expected: MouseEvent | TouchEvent)');\n}\n\nexports.absPos = absPos;\n\nfunction stopEvent(e) {\n  e.stopPropagation();\n  e.preventDefault();\n}\n\nexports.stopEvent = stopEvent;\n\nfunction getElementPosition(el) {\n  if (!el) return;\n\n  var _a = el.getBoundingClientRect(),\n      x = _a.left,\n      y = _a.top;\n\n  return {\n    x: x,\n    y: y\n  };\n}\n\nexports.getElementPosition = getElementPosition;","map":{"version":3,"sources":["../src/utils.ts"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.getElementPosition = exports.stopEvent = exports.absPos = exports.valueToAngle = exports.calcAngleDiff = exports.calculateNearestValueToPoint = exports.clamp = exports.matrixScale = exports.degrees = exports.radians = exports.polarToCartesian = exports.ANGLE_OFFSET = exports.DEG_360_IN_RAD = void 0;\nexports.DEG_360_IN_RAD = radians(360);\nexports.ANGLE_OFFSET = Math.PI;\nfunction polarToCartesian(_a) {\n    var center = _a.center, angle = _a.angle, radius = _a.radius;\n    return {\n        x: center.x + Math.sin(angle) * radius,\n        y: center.y + Math.cos(angle) * radius,\n    };\n}\nexports.polarToCartesian = polarToCartesian;\nfunction radians(deg) {\n    return (deg * Math.PI) / 180;\n}\nexports.radians = radians;\nfunction degrees(rad) {\n    return (rad * 180) / Math.PI;\n}\nexports.degrees = degrees;\nfunction matrixScale(scale, x, y) {\n    return \"matrix(\" + scale + \", 0, 0, \" + scale + \", \" + (x - scale * x) + \", \" + (y - scale * y) + \")\";\n}\nexports.matrixScale = matrixScale;\nfunction clamp(min, max, value) {\n    return Math.min(Math.max(value, min), max);\n}\nexports.clamp = clamp;\nfunction calculateNearestValueToPoint(_a) {\n    var _b = _a.center, centerX = _b.x, centerY = _b.y, _c = _a.container, containerX = _c.x, containerY = _c.y, _d = _a.point, pointX = _d.x, pointY = _d.y, radius = _a.radius, value = _a.value;\n    var radialPosition = {\n        x: pointX - containerX - centerX,\n        y: -(pointY - containerY - centerY),\n    };\n    var valuePosition = polarToCartesian({\n        center: { x: 0, y: 0 },\n        angle: valueToAngle(value),\n        radius: radius,\n    });\n    var deltaTheta = calcAngleDiff(radialPosition.x, radialPosition.y, valuePosition.x, -valuePosition.y);\n    var deltaValue = value + deltaTheta / 360;\n    var nearestValue = deltaValue > 1 ? deltaValue - 1 : deltaValue;\n    return nearestValue;\n}\nexports.calculateNearestValueToPoint = calculateNearestValueToPoint;\nfunction calcAngleDiff(x1, y1, x2, y2) {\n    var arcTangent = Math.atan2(x1 * y2 - y1 * x2, x1 * x2 + y1 * y2);\n    if (arcTangent < 0) {\n        arcTangent += 2 * Math.PI;\n    }\n    return (arcTangent * 180) / Math.PI;\n}\nexports.calcAngleDiff = calcAngleDiff;\nfunction valueToAngle(value) {\n    return -value * exports.DEG_360_IN_RAD + exports.ANGLE_OFFSET;\n}\nexports.valueToAngle = valueToAngle;\nfunction absPos(e) {\n    var touchEvent = e.touches && e;\n    if (touchEvent) {\n        return {\n            x: touchEvent.changedTouches[0].pageX -\n                (window.scrollX || window.pageXOffset),\n            y: touchEvent.changedTouches[0].pageY -\n                (window.scrollY || window.pageYOffset),\n        };\n    }\n    var mouseEvent = e.pageX && e;\n    if (mouseEvent) {\n        return {\n            x: mouseEvent.pageX - (window.scrollX || window.pageXOffset),\n            y: mouseEvent.pageY - (window.scrollY || window.pageYOffset),\n        };\n    }\n    throw new Error('Unknown event type received (expected: MouseEvent | TouchEvent)');\n}\nexports.absPos = absPos;\nfunction stopEvent(e) {\n    e.stopPropagation();\n    e.preventDefault();\n}\nexports.stopEvent = stopEvent;\nfunction getElementPosition(el) {\n    if (!el)\n        return;\n    var _a = el.getBoundingClientRect(), x = _a.left, y = _a.top;\n    return { x: x, y: y };\n}\nexports.getElementPosition = getElementPosition;\n//# sourceMappingURL=utils.js.map"]},"metadata":{},"sourceType":"script"}