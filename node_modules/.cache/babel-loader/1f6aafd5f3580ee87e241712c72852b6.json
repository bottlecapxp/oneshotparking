{"ast":null,"code":"import _slicedToArray from\"/Users/bottlecapmedia/Documents/Applications/OneShot Parking/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useContext,useEffect}from'react';import{PaymentContext}from'../Context/PaymentContext';import Receipt from'../Components/Receipt/Receipt';import{useHistory}from'react-router-dom';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export var CountDown=function CountDown(){var history=useHistory();var _useContext=useContext(PaymentContext),darkMode=_useContext.darkMode;var getSetTime=localStorage.getItem('expTimeInSecs');var _useState=useState(false),_useState2=_slicedToArray(_useState,2),showReceipt=_useState2[0],setShowReceipt=_useState2[1];var expiredTime=localStorage.getItem('expTime');var _useState3=useState({globalContainer:'global_container',color:'#585858',circleAnimation:'circleAnimation',countDownAdj:'countdown_adjustment'}),_useState4=_slicedToArray(_useState3,2),darkModeStyle=_useState4[0],setDarkModeStyle=_useState4[1];var orange;var orangeTxt;var verbageChange='Active Session';var _useState5=useState({divStyle:{display:'flex',flexDirection:'column',alignItems:'center',justifyContent:'center'},buttonStyle:{marginTop:'30px',border:'1px solid #848484',fontSize:'13px',// border: '1px solid #FF4F4F',\npadding:'10px',borderRadius:'10px',margin:'0px 5px 0px 5px',boxShadow:'10px 10px 30px rgba(174, 174, 192, 0.4), -10px -10px 30px #FFFFFF'},buttonDiv:{width:'100%',display:'flex',justifyContent:'space-around'}}),_useState6=_slicedToArray(_useState5,2),containerStyling=_useState6[0],setContainerStyling=_useState6[1];var toggle=function toggle(){setShowReceipt(!showReceipt);};var _useState7=useState({style:{}}),_useState8=_slicedToArray(_useState7,2),activeSession=_useState8[0],setActiveSession=_useState8[1];var getExpTimeInSecs=localStorage.getItem('expTimeInSecs');var date=new Date();var d=0;var m=date.getMinutes()*60;var h=date.getHours()*3600;var s=date.getSeconds();var sum=0;var hour_=Math.floor(getSetTime/100)*3600;var minutes_=Math.round(getSetTime%100)*60;var count=getSetTime-sum;console.log(expiredTime);// Add this to local storage as the initial time\nvar _useState9=useState({days:Math.floor(getSetTime/100),hours:Math.floor(getSetTime/100),mins:Math.round(getSetTime%100),secs:60}),_useState10=_slicedToArray(_useState9,2),countDown=_useState10[0],setCountDown=_useState10[1];var counter=null;var initCounter=function initCounter(){if(localStorage.getItem('count')==null||localStorage.getItem('count')==0){localStorage.setItem('count',count);}count=getLocalStorage('count');counter=setInterval(timer,1000);};var setLocalStorage=function setLocalStorage(key,value){if(localStorage){localStorage.setItem(key,value);}return value;};var getLocalStorage=function getLocalStorage(key){return localStorage?localStorage.getItem(key):'';};var timer=function timer(){// Set conditions for active session behavior\n// color, text, sms\nvar date_y=new Date();if(date_y.getMinutes()>m||date_y.getHours()>h||date_y.getSeconds()>s){m=date_y.getMinutes();h=date_y.getHours();s=date_y.getSeconds();sum=h*3600+m*60;console.log(\"sum: \".concat(sum,\" - \").concat(h,\":\").concat(m,\":\").concat(s));}count=setLocalStorage('count',getExpTimeInSecs-sum);if(count<=0){localStorage.setItem('count',0);localStorage.setItem('expTimeInSecs',0);setCountDown({days:'00',hours:'00',mins:'00',secs:'00'});clearInterval(counter);return;}var dayscount=days*24;var hour=(getExpTimeInSecs-sum)/3600;var seconds=count%60;var minutes=Math.floor(count/60);var hours=Math.floor(minutes/60);var days=Math.floor(hours/24);minutes%=60;hours=days>0?hours-days*24:hours%=60;// days %= 24\nconsole.log(days);console.log(hour-dayscount);console.log(hours);console.log(minutes);console.log(hours/24);setCountDown({days:days,hours:hours,mins:minutes,secs:60-s});;};var make_change_base_on_time=function make_change_base_on_time(){if(countDown.hours==0&&countDown.mins<20){orange='countdown_adjustment_orange';orangeTxt='txtOrange';}if(countDown.hours==0&&countDown.mins<=10){orange='countdown_adjustment_red';orangeTxt='txtRed';verbageChange='Expiring Soon';}if(countDown.mins==0&&countDown.hours==0){orange='countdown_adjustment_red';orangeTxt='txtRed';verbageChange='Session Ended';}};make_change_base_on_time();// Set mutable variables for updates\n// These are the times updated times     \nuseEffect(function(){if(darkMode>=1800||darkMode<=600){setDarkModeStyle({globalContainer:'global_container_dark',color:'white',submitBtn:'submitBtn_dark',circleAnimation:'circleAnimation_dark',countDownAdj:'countdown_adjustment_dark'});setContainerStyling({divStyle:{display:'flex',flexDirection:'column',alignItems:'center',justifyContent:'center'},buttonStyle:{marginTop:'30px',border:'1px solid #EA4335',fontSize:'13px',// border: '1px solid #FF4F4F',\npadding:'10px',borderRadius:'10px',margin:'0px 5px 0px 5px',color:'#EA4335',background:'#1E2834',boxSizing:'border-box',boxShadow:'10px 10px 30px rgba(0, 0, 0, 0.6), -10px -10px 30px rgba(255, 255, 255, 0.12)'},buttonDiv:{width:'100%',display:'flex',justifyContent:'space-around'}});}initCounter();},[]);return/*#__PURE__*/_jsx(\"div\",{style:{overflowY:'hidden'},className:\"\".concat(darkModeStyle.globalContainer,\" choose_lot \").concat(orange),children:/*#__PURE__*/_jsxs(\"div\",{style:containerStyling.divStyle,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"pulse_holder\",children:[/*#__PURE__*/_jsx(\"div\",{className:darkModeStyle.circleAnimation}),/*#__PURE__*/_jsx(\"div\",{className:\"countdown_digits_holder\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"\".concat(darkModeStyle.countDownAdj,\" \").concat(orange),children:[/*#__PURE__*/_jsx(\"h3\",{className:orangeTxt,style:{marginBottom:'0px'},children:verbageChange}),/*#__PURE__*/_jsxs(\"div\",{className:\"countdown_digits\",children:[countDown.days>0?/*#__PURE__*/_jsx(\"span\",{className:\"digits \".concat(orangeTxt),children:\"\".concat(countDown.days,\"d\")}):'',/*#__PURE__*/_jsx(\"span\",{className:\"digits \".concat(orangeTxt),children:\"\".concat(countDown.hours,\"h\")}),/*#__PURE__*/_jsx(\"span\",{className:\"digits \".concat(orangeTxt),children:\"\".concat(countDown.mins,\"m\")}),/*#__PURE__*/_jsxs(\"span\",{className:\"digits \".concat(orangeTxt),children:[countDown.secs==60?'00':\"\".concat(countDown.secs),\"s\"]})]})]})})]}),showReceipt?/*#__PURE__*/_jsx(Receipt,{close:toggle}):'',/*#__PURE__*/_jsxs(\"h4\",{className:orangeTxt,style:{marginTop:'30%',color:darkModeStyle.color},children:[\"Your Time Expires at: \",expiredTime]}),/*#__PURE__*/_jsxs(\"div\",{style:containerStyling.buttonDiv,children:[/*#__PURE__*/_jsx(\"span\",{className:\"\".concat(orange,\" \").concat(orangeTxt),style:containerStyling.buttonStyle,onClick:function onClick(){history.push('/1111');},children:\"Extend My Time\"}),/*#__PURE__*/_jsx(\"span\",{className:\"\".concat(orange,\" \").concat(orangeTxt),onClick:toggle,style:containerStyling.buttonStyle,children:\"View My Receipt\"})]})]})});};// console.log(time.getSeconds())\n// localStorage.setItem('secs', updated_secs--)\n// if(updated_secs <= 0 ){\n//     localStorage.setItem('secs', 60)\n//  clearInterval(run)\n//         // localStorage.setItem('mins', updated_mins)\n//         // localStorage.setItem('secs', 60)\n//     }\n// if(updated_mins == 0){\n//     updated_hours--\n//     localStorage.setItem('hours', updated_hours)\n//     localStorage.setItem('mins', 60)\n//     // updated_mins = 60\n// }\n// if(updated_hours == 0){\n//     localStorage.setItem('hours', '00')\n//     // updated_hours = '00'\n// }","map":{"version":3,"sources":["/Users/bottlecapmedia/Documents/Applications/OneShot Parking/src/Pages/CountDown.js"],"names":["React","useState","useContext","useEffect","PaymentContext","Receipt","useHistory","CountDown","history","darkMode","getSetTime","localStorage","getItem","showReceipt","setShowReceipt","expiredTime","globalContainer","color","circleAnimation","countDownAdj","darkModeStyle","setDarkModeStyle","orange","orangeTxt","verbageChange","divStyle","display","flexDirection","alignItems","justifyContent","buttonStyle","marginTop","border","fontSize","padding","borderRadius","margin","boxShadow","buttonDiv","width","containerStyling","setContainerStyling","toggle","style","activeSession","setActiveSession","getExpTimeInSecs","date","Date","d","m","getMinutes","h","getHours","s","getSeconds","sum","hour_","Math","floor","minutes_","round","count","console","log","days","hours","mins","secs","countDown","setCountDown","counter","initCounter","setItem","getLocalStorage","setInterval","timer","setLocalStorage","key","value","date_y","clearInterval","dayscount","hour","seconds","minutes","make_change_base_on_time","submitBtn","background","boxSizing","overflowY","marginBottom","push"],"mappings":"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","sourcesContent":["import React, { useState, useContext, useEffect } from 'react'\nimport { PaymentContext } from '../Context/PaymentContext'\nimport Receipt from '../Components/Receipt/Receipt'\nimport {useHistory} from 'react-router-dom'\n\n\n\nexport const CountDown = () => {\n    const history = useHistory()\n    const { darkMode } = useContext(PaymentContext)\n    const getSetTime = localStorage.getItem('expTimeInSecs')\n    const [showReceipt, setShowReceipt] = useState(false)\n    const expiredTime = localStorage.getItem('expTime')\n    const [darkModeStyle, setDarkModeStyle] = useState({\n        globalContainer: 'global_container',\n        color: '#585858',\n        circleAnimation: 'circleAnimation',\n        countDownAdj: 'countdown_adjustment'\n    })\n\n        var orange;\n        var orangeTxt;\n        var verbageChange = 'Active Session'\n\n    const [containerStyling, setContainerStyling] = useState({\n        divStyle: {\n            display: 'flex',\n            flexDirection: 'column',\n            alignItems: 'center',\n            justifyContent: 'center'\n        },\n        buttonStyle: {\n            marginTop: '30px',\n            border: '1px solid #848484',\n            fontSize: '13px',\n            // border: '1px solid #FF4F4F',\n            padding: '10px',\n            borderRadius: '10px',\n            margin: '0px 5px 0px 5px',\n            boxShadow: '10px 10px 30px rgba(174, 174, 192, 0.4), -10px -10px 30px #FFFFFF'\n        },\n        buttonDiv: {\n            width: '100%',\n            display: 'flex',\n            justifyContent: 'space-around'\n        }\n    })\n    const toggle = () => {\n        setShowReceipt(!showReceipt)\n    }\n\n\nconst [activeSession, setActiveSession] = useState({ \n    style: { \n\n    }\n})\n\n    var getExpTimeInSecs = localStorage.getItem('expTimeInSecs')\n    var date = new Date()\n    var d = 0\n    var m = date.getMinutes() * 60\n    var h = date.getHours() * 3600\n    var s = date.getSeconds()\n    var sum = 0\n    \n\n    var hour_ = Math.floor(getSetTime / 100) * 3600\n    var minutes_ = Math.round(getSetTime % 100) * 60\n    var count = getSetTime - sum\n    console.log(expiredTime)\n\n\n    // Add this to local storage as the initial time\n    const [countDown, setCountDown] = useState({\n        days: Math.floor(getSetTime / 100),\n        hours: Math.floor(getSetTime / 100),\n        mins: Math.round(getSetTime % 100),\n        secs: 60\n    })\n\n\n\n\n    var counter = null;\n\n\n\n    const initCounter = () => {\n        if (localStorage.getItem('count') == null || localStorage.getItem('count') == 0) {\n            localStorage.setItem('count', count);\n        }\n\n        count = getLocalStorage('count');\n\n        counter = setInterval(timer, 1000);\n    }\n\n    const setLocalStorage = (key, value) => {\n        if (localStorage) {\n            localStorage.setItem(key, value);\n        }\n        return value;\n    }\n\n    const getLocalStorage = (key) => {\n        return localStorage ? localStorage.getItem(key) : '';\n    }\n\n\n\n    const timer = () => {\n        // Set conditions for active session behavior\n        // color, text, sms\n        var date_y = new Date()\n        if(date_y.getMinutes() > m || date_y.getHours() > h || date_y.getSeconds() > s){\n            m = date_y.getMinutes()\n            h = date_y.getHours()\n            s = date_y.getSeconds()\n            sum = (h * 3600) + (m * 60)\n            console.log(`sum: ${sum} - ${h}:${m}:${s}`)\n        }\n      \n     \n        count = setLocalStorage('count', getExpTimeInSecs - sum);\n        if (count <= 0) {\n            localStorage.setItem('count', 0)\n            localStorage.setItem('expTimeInSecs', 0)\n\n            setCountDown({\n                days: '00',\n                hours: '00',\n                mins: '00',\n                secs: '00'\n            })\n            clearInterval(counter);\n            return;\n        }\n        var dayscount = days * 24\n        var hour = ((getExpTimeInSecs - sum)/ 3600) \n\n        var seconds = count % 60\n        var minutes = Math.floor(count / 60)\n        var hours = Math.floor(minutes / 60)\n        var days = Math.floor(hours / 24)\n        minutes %= 60;\n        hours = (days > 0?hours - (days * 24):hours %= 60)\n        // days %= 24\n\n\nconsole.log(days)\nconsole.log(hour - dayscount)   \n\nconsole.log(hours)\nconsole.log(minutes)\nconsole.log(hours / 24)\n\n        setCountDown({\n            days: days,\n            hours: hours,\n            mins: minutes,\n            secs: 60 - s\n        })\n        ;\n        ;\n\n    }\n\nconst make_change_base_on_time = () => { \nif(countDown.hours == 0 && countDown.mins < 20){ \n  orange = 'countdown_adjustment_orange'\n  orangeTxt = 'txtOrange'\n}\nif(countDown.hours == 0 && countDown.mins <= 10){ \n    orange = 'countdown_adjustment_red'\n    orangeTxt = 'txtRed'\n    verbageChange = 'Expiring Soon'\n  }\n  if(countDown.mins == 0 && countDown.hours == 0){ \n    orange = 'countdown_adjustment_red'\n    orangeTxt = 'txtRed'\n    verbageChange = 'Session Ended'\n  }\n}\nmake_change_base_on_time()\n\n\n\n\n\n    // Set mutable variables for updates\n    // These are the times updated times     \n\n\n    useEffect(() => {\n        if (darkMode >= 1800 || darkMode <= 600) {\n            setDarkModeStyle({\n                globalContainer: 'global_container_dark',\n                color: 'white',\n                submitBtn: 'submitBtn_dark',\n                circleAnimation: 'circleAnimation_dark',\n                countDownAdj: 'countdown_adjustment_dark'\n            })\n            setContainerStyling({\n                divStyle: {\n                    display: 'flex',\n                    flexDirection: 'column',\n                    alignItems: 'center',\n                    justifyContent: 'center'\n                },\n                buttonStyle: {\n                    marginTop: '30px',\n                    border: '1px solid #EA4335',\n                    fontSize: '13px',\n                    // border: '1px solid #FF4F4F',\n                    padding: '10px',\n                    borderRadius: '10px',\n                    margin: '0px 5px 0px 5px',\n                    color: '#EA4335',\n                    background: '#1E2834',\n                    boxSizing: 'border-box',\n                    boxShadow: '10px 10px 30px rgba(0, 0, 0, 0.6), -10px -10px 30px rgba(255, 255, 255, 0.12)'\n\n                },\n                buttonDiv: {\n                    width: '100%',\n                    display: 'flex',\n                    justifyContent: 'space-around'\n                }\n            })\n        }\n        \n\n\n\n        initCounter()\n    }, [])\n\n    return (\n        <div style={{overflowY: 'hidden'}} className={`${darkModeStyle.globalContainer} choose_lot ${orange}`}>\n            <div style={containerStyling.divStyle}>\n                <div className='pulse_holder'>\n                <div className={darkModeStyle.circleAnimation}></div>\n                <div className='countdown_digits_holder'>\n                    <div className={`${darkModeStyle.countDownAdj} ${orange}`}>\n                        <h3 className={orangeTxt} style={{ marginBottom: '0px' }}>{verbageChange}</h3>\n                        <div className='countdown_digits'>\n                        {countDown.days > 0?(<span className={`digits ${orangeTxt}`}>{`${countDown.days}d`}</span>): ''}\n                            <span className={`digits ${orangeTxt}`}>{`${countDown.hours}h`}</span>\n                            <span className={`digits ${orangeTxt}`}>{`${countDown.mins}m`}</span>\n                            <span className={`digits ${orangeTxt}`} >{countDown.secs == 60?'00':`${countDown.secs}`}s</span>\n                        </div>\n                    </div>\n\n                </div>\n                </div>\n                {showReceipt ? <Receipt close={toggle}/> : ''}\n\n                <h4 className={orangeTxt} style={{ marginTop: '30%', color: darkModeStyle.color }}>Your Time Expires at: {expiredTime}</h4>\n                <div style={containerStyling.buttonDiv}>\n                    <span className={`${orange} ${orangeTxt}`} style={containerStyling.buttonStyle} onClick={()=>{history.push('/1111')}}>Extend My Time</span>\n                    <span className={`${orange} ${orangeTxt}`} onClick={toggle} style={containerStyling.buttonStyle}>View My Receipt</span>\n                </div>\n\n            </div>\n\n            {/* Count down time */}\n            {/* Buttone to Extend time here */}\n        </div>\n    )\n}\n\n\n\n\n// console.log(time.getSeconds())\n// localStorage.setItem('secs', updated_secs--)\n\n// if(updated_secs <= 0 ){\n//     localStorage.setItem('secs', 60)\n\n//  clearInterval(run)\n//         // localStorage.setItem('mins', updated_mins)\n//         // localStorage.setItem('secs', 60)\n//     }\n// if(updated_mins == 0){\n//     updated_hours--\n//     localStorage.setItem('hours', updated_hours)\n//     localStorage.setItem('mins', 60)\n//     // updated_mins = 60\n// }\n// if(updated_hours == 0){\n//     localStorage.setItem('hours', '00')\n//     // updated_hours = '00'\n// }"]},"metadata":{},"sourceType":"module"}